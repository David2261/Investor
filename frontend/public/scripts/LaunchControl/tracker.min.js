"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cookieUtils_1=require("../cookieUtils");!function(){var o,n=import.meta.env.VITE_API_URL,t=(0,cookieUtils_1.getCookie)("userId");t||(t=Math.random().toString(36).substring(2)+Date.now().toString(36),(0,cookieUtils_1.setCookie)("userId",t,30));var i=(new Date).toISOString();(0,cookieUtils_1.setCookie)("visitTime",i,30);var e=navigator.userAgent;(0,cookieUtils_1.setCookie)("userAgent",e,30);var r=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,cookieUtils_1.setCookie)("timeZone",r,30);var a=/Mobi|Android/i.test(navigator.userAgent),s={isMobile:a,platform:navigator.platform||"unknown",device:a?(null===(o=navigator.userAgent.match(/(iPhone|iPad|Android|Mobile)/i))||void 0===o?void 0:o[0])||"unknown":"desktop"};(0,cookieUtils_1.setCookie)("deviceInfo",JSON.stringify(s),30);var c=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{},d={type:c.effectiveType||"unknown",downlink:c.downlink||"unknown",rtt:c.rtt||"unknown"};(0,cookieUtils_1.setCookie)("connectionInfo",JSON.stringify(d),30);var l=(0,cookieUtils_1.getCookie)("ipAddress")||"unknown";function u(){fetch("".concat(n,"/api/v1/launch-control/"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})}).catch((function(){})),window.addEventListener("unload",(function(){navigator.sendBeacon("".concat(n,"/api/v1/launch-control/"),JSON.stringify({}))}))}fetch("https://api.ipify.org?format=json").then((function(o){return o.json()})).then((function(o){l=o.ip,(0,cookieUtils_1.setCookie)("ipAddress",l,30),u()})).catch((function(){return u()}))}();